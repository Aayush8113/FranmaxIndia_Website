"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[2088],{742:()=>{},2549:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var n=a(5043),t=a(7488),i=a(184),r=(a(2342),a(8537)),l=a(8984),c=(a(742),a(4861),a(3862)),o=a(579);function d(){const[e,s]=(0,n.useState)([]),[a,d]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),[g,j]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),b=(0,n.useCallback)(async()=>{d(!0);try{const e=await fetch((0,c.e)("get-generic-inquiries.php")),a=await e.json();a.success?(s(a.data),m(null)):(t.oR.error(a.message||"Failed to fetch inquiries."),m(a.message))}catch(e){t.oR.error("Network error. Please check your server connection."),m(e.message)}finally{d(!1)}},[]);(0,n.useEffect)(()=>{b()},[b]);const p=()=>{x(null),j(!1)};return(0,o.jsxs)("div",{className:"dashboard-container",children:[(0,o.jsx)(r.A,{}),(0,o.jsxs)("div",{className:"main-content",children:[(0,o.jsx)(t.N9,{position:"top-right",autoClose:3e3}),(0,o.jsxs)("div",{className:"investor-table-container",children:[(0,o.jsx)("div",{className:"table-header",children:(0,o.jsx)("h2",{className:"table-title",children:"All Inquiries"})}),a?(0,o.jsx)("div",{className:"loading",children:"Loading inquiries..."}):h?(0,o.jsxs)("div",{className:"error",children:["Error: ",h]}):0===e.length?(0,o.jsx)("div",{className:"no-data",children:"No Inquiries found."}):(0,o.jsx)("div",{className:"table-wrapper",children:(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Person Name"}),(0,o.jsx)("th",{children:"Phone"}),(0,o.jsx)("th",{children:"Email"}),(0,o.jsx)("th",{children:"State"}),(0,o.jsx)("th",{children:"City"}),(0,o.jsx)("th",{children:"Message"}),(0,o.jsx)("th",{children:"Assign"})]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{"data-label":"Person Name",children:e.name}),(0,o.jsx)("td",{"data-label":"Phone",children:e.phone}),(0,o.jsx)("td",{"data-label":"Email",children:e.email}),(0,o.jsx)("td",{"data-label":"State",children:e.state_name}),(0,o.jsx)("td",{"data-label":"City",children:e.city_name}),(0,o.jsx)("td",{"data-label":"Message",children:e.message}),(0,o.jsx)("td",{"data-label":"Assign",children:(0,o.jsxs)("button",{className:"assign-btn",onClick:()=>(x(e),void j(!0)),children:[(0,o.jsx)(i.p7b,{className:"assign-icon"}),(0,o.jsx)("span",{className:"assign-text",children:"Assign"})]})})]},e.id))})]})})]}),g&&(0,o.jsx)(l.A,{investor:u,onClose:p,onAssign:()=>{t.oR.success("Investor Assigned Successfully!"),b(),p()}})]})]})}},4861:()=>{},8984:(e,s,a)=>{a.d(s,{A:()=>l});var n=a(5043),t=a(7488),i=a(3862),r=a(579);function l(e){let{investor:s,onClose:a,onAssign:l}=e;const[c,o]=(0,n.useState)([]),[d,h]=(0,n.useState)(""),[m,g]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{const e=await fetch((0,i.e)("get-brands-name.php")),s=await e.json();s.success?o(s.data):t.oR.error(s.message||"Failed to fetch brands for dropdown.")}catch(e){t.oR.error("Network error fetching brands for dropdown."),console.error("Error fetching brands:",e)}finally{g(!1)}})()},[]);return(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"assign-modal",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsxs)("h3",{children:["Assign ",s.name," to Brand"]}),(0,r.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("p",{children:["**Assigning** **`",s.name,"`** **to a brand.**"]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"brand-select",children:"Select Brand:"}),m?(0,r.jsx)("p",{children:"Loading brands..."}):(0,r.jsxs)("select",{id:"brand-select",value:d,onChange:e=>h(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"-- Choose a Brand --"}),c.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{className:"btn-assign",onClick:async()=>{if(!d)return void t.oR.error("Please select a brand to assign.");const e={name:s.name,phone:s.phone,email:s.email,state:s.state_name,state_id:s.state_id,city:s.city_name,city_id:s.city_id,message:s.message,brand_id:d};console.log("Data being sent to PHP:",e),console.log("JSON stringified data:",JSON.stringify(e));try{const s=await fetch((0,i.e)("assign-investor.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log("Raw response status:",s.status);const a=await s.text();console.log("Raw response text:",a);const n=JSON.parse(a);n.success?(t.oR.success(n.message),l()):t.oR.error(n.message||"Failed to assign investor.")}catch(a){t.oR.error("API error during assignment: "+a.message),console.error("Error during API call:",a)}},disabled:!d,children:"Assign"}),(0,r.jsx)("button",{className:"btn-cancel",onClick:a,children:"Cancel"})]})]})})}}}]);
//# sourceMappingURL=2088.7da799e4.chunk.js.map