"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[1058],{3610:()=>{},8783:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var n=t(9379),a=t(5043),l=t(2823),i=t.n(l),c=(t(5884),t(3610),t(8537)),d=t(184),r=t(7488),o=(t(2342),t(3862)),h=t(579);function m(){const[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[j,u]=(0,a.useState)(!1),[p,N]=(0,a.useState)(null),[b,w]=(0,a.useState)({title:"",description:""}),[v,g]=(0,a.useState)(null),[f,C]=(0,a.useState)({title:"",image:null,description:""}),y=()=>{u(!1),C({title:"",image:null,description:""})},k=e=>{const{name:s,value:t,files:a}=e.target;C(e=>(0,n.A)((0,n.A)({},e),{},{[s]:a?a[0]:t}))},A=()=>{N(null),w({title:"",description:""})},S=e=>{const{name:s,value:t}=e.target;w(e=>(0,n.A)((0,n.A)({},e),{},{[s]:t}))},D=e=>{w(s=>(0,n.A)((0,n.A)({},s),{},{description:e}))},F=()=>{g(null)},T=async e=>{x(!0);try{const s=await fetch((0,o.e)("add-news.php"),{method:"POST",body:e});if(!s.ok)throw new Error("Network response was not ok.");const t=await s.json();t.success?(r.oR.success(t.message),E(),y(),N(null)):r.oR.error(t.message||"An unexpected error occurred.")}catch(s){r.oR.error("Failed to communicate with the server.")}finally{x(!1)}},q=e=>{e.preventDefault();const s=new FormData;s.append("action","edit"),s.append("id",p),s.append("title",b.title),s.append("description",b.description),T(s)},E=async()=>{x(!0);try{const e=await fetch((0,o.e)("get-news.php"));if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();t.success?s(t.news):s([])}catch(e){r.oR.error("Failed to fetch newsletters.")}finally{x(!1)}};return(0,a.useEffect)(()=>{E()},[]),(0,h.jsxs)("div",{className:"newsletter-page-container",children:[(0,h.jsx)(c.A,{}),(0,h.jsxs)("div",{className:"main-content",children:[(0,h.jsx)(r.N9,{}),(0,h.jsxs)("div",{className:"table-header",children:[(0,h.jsx)("h2",{className:"table-title",children:"Newsletters"}),(0,h.jsxs)("button",{onClick:()=>u(!0),className:"add-news-btn",children:[(0,h.jsx)(d.OiG,{className:"icon"})," Add News"]})]}),m&&(0,h.jsx)("div",{className:"loading",children:"Loading..."}),!m&&0===e.length&&(0,h.jsx)("div",{className:"no-data-message",children:"No newsletters found."}),!m&&e.length>0&&(0,h.jsx)("div",{className:"table-wrapper",children:(0,h.jsxs)("table",{className:"newsletter-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"ID"}),(0,h.jsx)("th",{children:"Title"}),(0,h.jsx)("th",{children:"Created At"}),(0,h.jsx)("th",{children:"Action"})]})}),(0,h.jsx)("tbody",{children:e.map(e=>(0,h.jsxs)(a.Fragment,{children:[p===e.id?(0,h.jsxs)("tr",{className:"edit-row",children:[(0,h.jsx)("td",{children:e.id}),(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"text",name:"title",value:b.title,onChange:S})}),(0,h.jsx)("td",{children:e.created_at}),(0,h.jsxs)("td",{className:"action-buttons",children:[(0,h.jsxs)("button",{onClick:q,className:"save-btn",children:[(0,h.jsx)(d.dIn,{})," Save"]}),(0,h.jsxs)("button",{onClick:A,className:"cancel-btn",children:[(0,h.jsx)(d.QCr,{})," Cancel"]})]})]}):(0,h.jsxs)("tr",{className:"summary-row",children:[(0,h.jsx)("td",{children:e.id}),(0,h.jsx)("td",{children:e.title}),(0,h.jsx)("td",{children:e.created_at}),(0,h.jsxs)("td",{className:"action-buttons",children:[(0,h.jsx)("button",{onClick:()=>{return s=e.id,void l(t===s?null:s);var s},className:"expand-btn",children:t===e.id?"Hide Details":"View Details"}),(0,h.jsxs)("button",{onClick:()=>(e=>{N(e.id),w({title:e.title,description:e.description})})(e),className:"edit-btn",children:[(0,h.jsx)(d.uO9,{})," Edit"]}),(0,h.jsxs)("button",{onClick:()=>{return s=e.id,void g(s);var s},className:"delete-btn",children:[(0,h.jsx)(d.qbC,{})," Delete"]})]})]}),p===e.id&&(0,h.jsx)("tr",{className:"details-row",children:(0,h.jsx)("td",{colSpan:"4",children:(0,h.jsx)("div",{className:"details-box",children:(0,h.jsx)(i(),{theme:"snow",value:b.description,onChange:D})})})}),t===e.id&&(0,h.jsx)("tr",{className:"details-row",children:(0,h.jsx)("td",{colSpan:"4",children:(0,h.jsxs)("div",{className:"details-box",children:[e.image&&(0,h.jsx)("img",{src:(0,o.V)("".concat(e.image)),alt:e.title,className:"newsletter-image"}),(0,h.jsx)("div",{className:"newsletter-description-html",dangerouslySetInnerHTML:{__html:e.description}})]})})})]},e.id))})]})})]}),j&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Add New Newsletter"}),(0,h.jsx)("button",{className:"close-btn",onClick:y,children:"\xd7"})]}),(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=new FormData;s.append("action","add"),s.append("title",f.title),s.append("image",f.image),s.append("description",f.description),T(s)},className:"add-news-form",encType:"multipart/form-data",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"title",children:"Title"}),(0,h.jsx)("input",{type:"text",id:"title",name:"title",value:f.title,onChange:k,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"image",children:"Image"}),(0,h.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:k,required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Description"}),(0,h.jsx)(i(),{theme:"snow",value:f.description,onChange:e=>{C(s=>(0,n.A)((0,n.A)({},s),{},{description:e}))}})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"submit",className:"submit-btn",children:"Add News"}),(0,h.jsx)("button",{type:"button",className:"cancel-btn",onClick:y,children:"Cancel"})]})]})]})}),v&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Confirm Deletion"}),(0,h.jsx)("button",{className:"close-btn",onClick:F,children:"\xd7"})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsx)("p",{children:"Are you sure you want to delete this newsletter? This action cannot be undone."})}),(0,h.jsxs)("div",{className:"modal-footer",children:[(0,h.jsxs)("button",{className:"delete-btn",onClick:()=>{const e=new FormData;e.append("id",v),e.append("action","delete"),T(e),g(null)},children:[(0,h.jsx)(d.qbC,{})," Delete"]}),(0,h.jsxs)("button",{className:"cancel-btn",onClick:F,children:[(0,h.jsx)(d.QCr,{})," Cancel"]})]})]})})]})}}}]);
//# sourceMappingURL=1058.8d6c5ddf.chunk.js.map