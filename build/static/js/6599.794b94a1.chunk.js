"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[6599],{4498:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(9379),l=s(5043),r=s(2270),n=s(184),o=s(7488),i=(s(2342),s(4861),s(8537)),c=s(3862),m=s(579);const u=[{value:"active",label:"Active"},{value:"not_active",label:"Not Active"}],d=(e,a,s,t,l,r)=>e.name&&""!==e.name.trim()?e.number&&/^\d{10}$/.test(e.number)?e.email&&/\S+@\S+\.\S+/.test(e.email)?a?s?l?t?!(!r||isNaN(r)||r<=0)||(o.oR.error("A valid payment amount is required."),!1):(o.oR.error("Please select payment status."),!1):(o.oR.error("Please select a status."),!1):(o.oR.error("Please select a city."),!1):(o.oR.error("Please select a state."),!1):(o.oR.error("A valid email address is required."),!1):(o.oR.error("A valid 10-digit mobile number is required."),!1):(o.oR.error("Name is required."),!1);function p(){const[e,a]=(0,l.useState)([]),[s,p]=(0,l.useState)([]),[v,h]=(0,l.useState)({name:"",number:"",email:"",paymentAmount:""}),[x,j]=(0,l.useState)(null),[f,N]=(0,l.useState)(null),[y,g]=(0,l.useState)(null),[b,A]=(0,l.useState)(null),[S,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>{fetch((0,c.e)("get-indian-states.php")).then(e=>e.json()).then(e=>{const s=e.map(e=>({value:e.id,label:e.name}));a(s)}).catch(e=>o.oR.error("Failed to load states."))},[]),(0,l.useEffect)(()=>{x?fetch("".concat((0,c.e)("get-cities.php"),"?state_id=").concat(x.value)).then(e=>e.json()).then(e=>{const a=e.map(e=>({value:e.id,label:e.name}));p(a)}).catch(e=>o.oR.error("Failed to load cities.")):(p([]),N(null))},[x]);return(0,m.jsxs)("div",{className:"dashboard-container",children:[(0,m.jsx)(i.A,{}),(0,m.jsxs)("div",{className:"main-content",children:[(0,m.jsx)(o.N9,{position:"top-right",autoClose:3e3}),(0,m.jsx)("div",{className:"add-investor-page",children:(0,m.jsxs)("div",{className:"add-investor-container",children:[(0,m.jsx)("h2",{className:"form-title",children:"Add New Investor"}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),S)return;if(!d(v,x,f,b,y,v.paymentAmount))return;C(!0);const a={investor_name:v.name,investor_mobile:v.number,investor_email:v.email,state_id:x.value,city_id:f.value,status:y.value,payment_amount:v.paymentAmount,payment_received:"yes"===b?1:0};try{const e=await fetch((0,c.e)("add-offline-investor.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await e.json();s.success?(o.oR.success("Investor added successfully!"),h({name:"",number:"",email:"",paymentAmount:""}),j(null),N(null),g(null),A(null)):o.oR.error(s.message||"Failed to add investor.")}catch(s){o.oR.error("\ud83d\udeab Server error. Please try again."),console.error(s)}finally{C(!1)}},children:[(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)(n.x$1,{className:"form-icon"}),(0,m.jsx)("input",{type:"text",placeholder:"Name",value:v.name,onChange:e=>h((0,t.A)((0,t.A)({},v),{},{name:e.target.value}))})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)(n.maD,{className:"form-icon"}),(0,m.jsx)("input",{type:"email",placeholder:"Email",value:v.email,onChange:e=>h((0,t.A)((0,t.A)({},v),{},{email:e.target.value}))})]})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)(n.Cab,{className:"form-icon"}),(0,m.jsx)("input",{type:"tel",placeholder:"Mobile Number",value:v.number,onChange:e=>h((0,t.A)((0,t.A)({},v),{},{number:e.target.value}))})]}),(0,m.jsxs)("div",{className:"form-group select-group",children:[(0,m.jsx)(n.vq8,{className:"form-icon"}),(0,m.jsx)(r.Ay,{options:e,value:x,onChange:j,placeholder:"Select State",classNamePrefix:"react-select"})]})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group select-group",children:[(0,m.jsx)(n.zsO,{className:"form-icon"}),(0,m.jsx)(r.Ay,{options:s,value:f,onChange:N,placeholder:"Select City",isDisabled:!x,classNamePrefix:"react-select"})]}),(0,m.jsxs)("div",{className:"form-group select-group",children:[(0,m.jsx)(n.__w,{className:"form-icon"}),(0,m.jsx)(r.Ay,{options:u,value:y,onChange:g,placeholder:"Select Status",classNamePrefix:"react-select"})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)(n.MxO,{className:"form-icon"}),(0,m.jsx)("input",{type:"number",placeholder:"Payment Amount",value:v.paymentAmount,onChange:e=>h((0,t.A)((0,t.A)({},v),{},{paymentAmount:e.target.value}))})]}),(0,m.jsxs)("div",{className:"form-group radio-group",children:[(0,m.jsx)("label",{className:"radio-label",children:"Payment Received:"}),(0,m.jsxs)("div",{className:"radio-options",children:[(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",value:"yes",checked:"yes"===b,onChange:e=>A(e.target.value)}),"Yes"]}),(0,m.jsxs)("label",{children:[(0,m.jsx)("input",{type:"radio",value:"no",checked:"no"===b,onChange:e=>A(e.target.value)}),"No"]})]})]}),(0,m.jsx)("button",{type:"submit",className:"submit-btn",disabled:S,children:S?"Adding...":"Add Investor"})]})]})})]})]})}},4861:()=>{}}]);
//# sourceMappingURL=6599.794b94a1.chunk.js.map