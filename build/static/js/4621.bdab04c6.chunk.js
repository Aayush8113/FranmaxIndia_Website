"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[4621],{1376:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(9379),i=s(5043),n=s(3862),l=s(184),c=s(6720),d=s(8537),r=s(7488),o=s(579);const m={online:(0,o.jsx)(c.zDi,{className:"icon"}),offline:(0,o.jsx)(c.qod,{className:"icon"}),hybrid:(0,o.jsx)(c.zhW,{className:"icon"})};function h(){const[e,a]=(0,i.useState)([]),[s,c]=(0,i.useState)(!0),[h,j]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1),[p,b]=(0,i.useState)({name:"",state_id:"",city_id:"",mas_cat_id:"",mobile:"",email:"",password:""}),[y,v]=(0,i.useState)(null),[_,g]=(0,i.useState)(""),[N,f]=(0,i.useState)(""),[w,C]=(0,i.useState)([]),[S,A]=(0,i.useState)([]),[k,E]=(0,i.useState)([]);(0,i.useEffect)(()=>{R(),B(),F()},[]);const R=async()=>{c(!0);try{const e=await fetch((0,n.e)("get-register-brands.php")),s=await e.json();s.success?a(s.data):j(s.message||"Failed to load brands")}catch(e){j("Network error: "+e.message)}finally{c(!1)}},B=async()=>{try{const e=await fetch((0,n.e)("get-indian-states.php")),a=await e.json();Array.isArray(a)&&C(a)}catch(e){console.error("Failed to fetch states:",e)}},F=async()=>{try{const e=await fetch((0,n.e)("get-master-category.php")),a=await e.json();if(Array.isArray(a)){const e=a.filter(e=>"0"===e.is_deleted);E(e)}}catch(e){console.error("Failed to fetch master categories:",e)}},O=e=>{b((0,t.A)((0,t.A)({},p),{},{[e.target.name]:e.target.value}))},M=()=>{v(null),g(""),f("")};return(0,o.jsxs)("div",{className:"dashboard-layout",children:[(0,o.jsx)(d.A,{}),(0,o.jsxs)("div",{className:"dashboard-content",children:[(0,o.jsx)("h2",{className:"brand-title",children:"Registered Brands"}),(0,o.jsxs)("button",{className:"add-brand-btn",onClick:()=>x(!0),children:[(0,o.jsx)(l.OiG,{})," Add Brand"]}),u&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal improved-modal",children:[(0,o.jsx)("h3",{className:"modal-title",children:"Add New Brand"}),[{label:"Brand Name",name:"name",type:"text",placeholder:"Enter brand name"},{label:"User Name",name:"user_name",type:"text",placeholder:"Enter user name"},{label:"Mobile",name:"mobile",type:"text",placeholder:"Enter mobile number"},{label:"Email",name:"email",type:"email",placeholder:"Enter email address"},{label:"Password",name:"password",type:"password",placeholder:"Enter password"}].map(e=>(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:e.label}),(0,o.jsx)("input",{type:e.type,name:e.name,value:p[e.name],onChange:O,placeholder:e.placeholder})]},e.name)),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"State"}),(0,o.jsxs)("select",{name:"state_id",value:p.state_id,onChange:e=>{const a=e.target.value;b((0,t.A)((0,t.A)({},p),{},{state_id:a,city_id:""})),a?(async a=>{try{const e=await fetch((0,n.e)("get-cities.php?state_id=".concat(a))),s=await e.json();Array.isArray(s)&&A(s)}catch(e){console.error("Failed to fetch cities:",e)}})(a):A([])},children:[(0,o.jsx)("option",{value:"",children:"-- Select State --"}),w.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"City"}),(0,o.jsxs)("select",{name:"city_id",value:p.city_id,onChange:O,children:[(0,o.jsx)("option",{value:"",children:"-- Select City --"}),S.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Master Category"}),(0,o.jsxs)("select",{name:"mas_cat_id",value:p.mas_cat_id,onChange:O,children:[(0,o.jsx)("option",{value:"",children:"-- Select Master Category --"}),k.map(e=>(0,o.jsx)("option",{value:e.mas_cat_id,children:e.mas_cat_name},e.mas_cat_id))]})]}),(0,o.jsxs)("div",{className:"modal-actions",children:[(0,o.jsx)("button",{className:"save-btn",onClick:async()=>{const{name:e,state_id:a,city_id:s,mas_cat_id:t,mobile:i,email:l,password:c}=p;if(e&&a&&s&&t&&i&&l&&c)try{const e=await fetch((0,n.e)("add-brand.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.name,user_name:p.user_name,mobile:p.mobile,email:p.email,password:p.password,state_id:p.state_id,city_id:p.city_id,mas_cat_id:p.mas_cat_id})}),a=await e.json();a.success?(r.oR.success("Brand added successfully"),x(!1),R(),b({name:"",state_id:"",city_id:"",mas_cat_id:"",mobile:"",email:"",password:""}),A([])):r.oR.error(a.message||"Failed to add brand")}catch(d){r.oR.error("API error: "+d.message)}else r.oR.error("All fields are required")},children:"Save"}),(0,o.jsx)("button",{className:"cancel-btn",onClick:()=>x(!1),children:"Cancel"})]})]})}),s?(0,o.jsx)("div",{className:"status-msg",children:"Loading..."}):h?(0,o.jsx)("div",{className:"status-msg error",children:h}):0===e.length?(0,o.jsx)("div",{className:"status-msg",children:"No brands found."}):(0,o.jsx)("div",{className:"table-wrapper",children:(0,o.jsxs)("table",{className:"brand-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Brand Name"}),(0,o.jsx)("th",{children:"Mobile"}),(0,o.jsx)("th",{children:"Email"}),(0,o.jsx)("th",{children:"Location"}),(0,o.jsx)("th",{children:"Sector"}),(0,o.jsx)("th",{children:"Status"}),(0,o.jsx)("th",{children:"Mode"}),(0,o.jsx)("th",{children:"Registered At"}),(0,o.jsx)("th",{children:"Actions"})," "]})}),(0,o.jsx)("tbody",{children:e.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.name}),(0,o.jsxs)("td",{children:[(0,o.jsx)(l.Cab,{className:"icon"})," ",e.mobile]}),(0,o.jsxs)("td",{children:[(0,o.jsx)(l.maD,{className:"icon"})," ",e.email]}),(0,o.jsxs)("td",{children:[(0,o.jsx)(l.vq8,{className:"icon"})," ",e.city_name,", ",e.state_name]}),(0,o.jsxs)("td",{children:[(0,o.jsx)(l.CLz,{className:"icon"})," ",e.sector_name||"N/A"]}),(0,o.jsx)("td",{children:y===e.id?(0,o.jsxs)("select",{value:_,onChange:e=>g(e.target.value),className:"status-select",children:[(0,o.jsx)("option",{value:"active",children:"active"}),(0,o.jsx)("option",{value:"not active",children:"not active"})]}):(0,o.jsx)("span",{className:"status ".concat("active"===e.status?"active":"not active"),children:e.status})}),(0,o.jsx)("td",{children:y===e.id?(0,o.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"mode-select",children:[(0,o.jsx)("option",{value:"online",children:"online"}),(0,o.jsx)("option",{value:"offline",children:"offline"}),(0,o.jsx)("option",{value:"hybrid",children:"hybrid"})]}):(0,o.jsxs)(o.Fragment,{children:[m[e.mode]||"\u2014"," ",e.mode]})}),(0,o.jsxs)("td",{children:[(0,o.jsx)(l.w_X,{className:"icon"})," ",e.register_at]}),(0,o.jsx)("td",{children:y===e.id?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"action-btn save-btn",onClick:()=>(async e=>{try{const a=await fetch((0,n.e)("update-brand-status-mode.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:_,mode:N})}),s=await a.json();s.success?(r.oR.success("Brand updated successfully"),R(),M()):r.oR.error(s.message||"Failed to update brand")}catch(a){r.oR.error("API error: "+a.message)}})(e.id),title:"Save Changes",children:(0,o.jsx)(l.dIn,{})}),(0,o.jsx)("button",{className:"action-btn cancel-btn",onClick:M,title:"Cancel Edit",children:(0,o.jsx)(l.QCr,{})})]}):(0,o.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(e=>{v(e.id),g(e.status),f(e.mode)})(e),title:"Edit Brand",children:(0,o.jsx)(l.uO9,{})})})]},e.id))})]})})]})]})}}}]);
//# sourceMappingURL=4621.bdab04c6.chunk.js.map