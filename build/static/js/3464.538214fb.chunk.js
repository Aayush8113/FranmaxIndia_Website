"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[3464],{453:(e,s,n)=>{n.r(s),n.d(s,{default:()=>u});var a=n(9379),t=n(5043),l=n(2823),c=n.n(l),i=(n(5884),n(3610),n(8537)),d=n(184),r=n(3862),o=n(7488),h=(n(2342),n(579));function u(){const[e,s]=(0,t.useState)([]),[n,l]=(0,t.useState)(null),[u,m]=(0,t.useState)(!0),[x,j]=(0,t.useState)(!1),[p,w]=(0,t.useState)(null),[b,N]=(0,t.useState)({question:"",answer:""}),[v,f]=(0,t.useState)(null),[A,C]=(0,t.useState)({question:"",answer:""}),q=()=>{j(!1),C({question:"",answer:""})},k=()=>{w(null),N({question:"",answer:""})},y=e=>{const{name:s,value:n}=e.target;N(e=>(0,a.A)((0,a.A)({},e),{},{[s]:n}))},g=e=>{N(s=>(0,a.A)((0,a.A)({},s),{},{answer:e}))},F=()=>{f(null)},S=async e=>{m(!0);try{const s=await fetch((0,r.e)("add-faq.php"),{method:"POST",body:e});if(!s.ok)throw new Error("Network response was not ok.");const n=await s.json();n.success?(o.oR.success(n.message),D(),q(),w(null)):o.oR.error(n.message||"An unexpected error occurred.")}catch(s){o.oR.error("Failed to communicate with the server.")}finally{m(!1)}},Q=e=>{e.preventDefault();const s=new FormData;s.append("action","edit"),s.append("id",p),s.append("question",b.question),s.append("answer",b.answer),S(s)},D=async()=>{m(!0);try{const e=await fetch((0,r.e)("get-faq.php"));if(!e.ok)throw new Error("Network response was not ok");const n=await e.json();n.success?s(n.faq):s([])}catch(e){o.oR.error("Failed to fetch FAQs.")}finally{m(!1)}};return(0,t.useEffect)(()=>{D()},[]),(0,h.jsxs)("div",{className:"newsletter-page-container",children:[(0,h.jsx)(i.A,{}),(0,h.jsxs)("div",{className:"main-content",children:[(0,h.jsx)(o.N9,{}),(0,h.jsxs)("div",{className:"table-header",children:[(0,h.jsx)("h2",{className:"table-title",children:"FAQs"}),(0,h.jsxs)("button",{onClick:()=>j(!0),className:"add-news-btn",children:[(0,h.jsx)(d.OiG,{className:"icon"})," Add FAQ"]})]}),u&&(0,h.jsx)("div",{className:"loading",children:"Loading..."}),!u&&0===e.length&&(0,h.jsx)("div",{className:"no-data-message",children:"No FAQs found."}),!u&&e.length>0&&(0,h.jsx)("div",{className:"table-wrapper",children:(0,h.jsxs)("table",{className:"newsletter-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"ID"}),(0,h.jsx)("th",{children:"Question"}),(0,h.jsx)("th",{children:"Created At"}),(0,h.jsx)("th",{children:"Action"})]})}),(0,h.jsx)("tbody",{children:e.map(e=>(0,h.jsxs)(t.Fragment,{children:[p===e.id?(0,h.jsxs)("tr",{className:"edit-row",children:[(0,h.jsx)("td",{children:e.id}),(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"text",name:"question",value:b.question,onChange:y})}),(0,h.jsx)("td",{children:e.created_at}),(0,h.jsxs)("td",{className:"action-buttons",children:[(0,h.jsxs)("button",{onClick:Q,className:"save-btn",children:[(0,h.jsx)(d.dIn,{})," Save"]}),(0,h.jsxs)("button",{onClick:k,className:"cancel-btn",children:[(0,h.jsx)(d.QCr,{})," Cancel"]})]})]}):(0,h.jsxs)("tr",{className:"summary-row",children:[(0,h.jsx)("td",{children:e.id}),(0,h.jsx)("td",{children:e.question}),(0,h.jsx)("td",{children:e.created_at}),(0,h.jsxs)("td",{className:"action-buttons",children:[(0,h.jsx)("button",{onClick:()=>{return s=e.id,void l(n===s?null:s);var s},className:"expand-btn",children:n===e.id?"Hide Answer":"View Answer"}),(0,h.jsxs)("button",{onClick:()=>(e=>{w(e.id),N({question:e.question,answer:e.answer})})(e),className:"edit-btn",children:[(0,h.jsx)(d.uO9,{})," Edit"]}),(0,h.jsxs)("button",{onClick:()=>{return s=e.id,void f(s);var s},className:"delete-btn",children:[(0,h.jsx)(d.qbC,{})," Delete"]})]})]}),p===e.id&&(0,h.jsx)("tr",{className:"details-row",children:(0,h.jsx)("td",{colSpan:"4",children:(0,h.jsx)("div",{className:"details-box",children:(0,h.jsx)(c(),{theme:"snow",value:b.answer,onChange:g})})})}),n===e.id&&(0,h.jsx)("tr",{className:"details-row",children:(0,h.jsx)("td",{colSpan:"4",children:(0,h.jsx)("div",{className:"details-box",children:(0,h.jsx)("div",{className:"newsletter-description-html",dangerouslySetInnerHTML:{__html:e.answer}})})})})]},e.id))})]})})]}),x&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Add New FAQ"}),(0,h.jsx)("button",{className:"close-btn",onClick:q,children:"\xd7"})]}),(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=new FormData;s.append("action","add"),s.append("question",A.question),s.append("answer",A.answer),S(s)},className:"add-news-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"question",children:"Question"}),(0,h.jsx)("input",{type:"text",id:"question",name:"question",value:A.question,onChange:e=>{const{value:s}=e.target;C(e=>(0,a.A)((0,a.A)({},e),{},{question:s}))},required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Answer"}),(0,h.jsx)(c(),{theme:"snow",value:A.answer,onChange:e=>{C(s=>(0,a.A)((0,a.A)({},s),{},{answer:e}))}})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"submit",className:"submit-btn",children:"Add FAQ"}),(0,h.jsx)("button",{type:"button",className:"cancel-btn",onClick:q,children:"Cancel"})]})]})]})}),v&&(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Confirm Deletion"}),(0,h.jsx)("button",{className:"close-btn",onClick:F,children:"\xd7"})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsx)("p",{children:"Are you sure you want to delete this FAQ? This action cannot be undone."})}),(0,h.jsxs)("div",{className:"modal-footer",children:[(0,h.jsxs)("button",{className:"delete-btn",onClick:()=>{const e=new FormData;e.append("id",v),e.append("action","delete"),S(e),f(null)},children:[(0,h.jsx)(d.qbC,{})," Delete"]}),(0,h.jsxs)("button",{className:"cancel-btn",onClick:F,children:[(0,h.jsx)(d.QCr,{})," Cancel"]})]})]})})]})}},3610:()=>{}}]);
//# sourceMappingURL=3464.538214fb.chunk.js.map