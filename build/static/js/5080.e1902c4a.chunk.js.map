{"version":3,"file":"static/js/5080.e1902c4a.chunk.js","mappings":"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","sources":["components/FranchiseListing.jsx"],"sourcesContent":["// File: src/components/FranchiseListing.jsx\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport './design/FranchiseListing.css';\r\nimport InquiryForm from './EnquiryForm';\r\nimport './design/ListingInquiry.css';\r\nimport { getImageUrl, getApiUrl } from '../utils/api';\r\n\r\n// Utility: Convert number into Indian \"lacs/crores\" format\r\nfunction formatIndianCurrency(number) {\r\n  if (!number || isNaN(number)) return \"—\";\r\n\r\n  if (number >= 10000000) {\r\n    const crores = number / 10000000;\r\n    return `${parseFloat(crores.toFixed(1)).toString().replace(/\\.0$/, '')} cr`;\r\n  } else {\r\n    const lacs = number / 100000;\r\n    return `${parseFloat(lacs.toFixed(0))} lacs`;\r\n  }\r\n}\r\n\r\nconst FranchiseListing = () => {\r\n  const { categoryId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [brands, setBrands] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const apiUrl = getApiUrl(`get-brands-by-category.php?category_id=${categoryId}`);\r\n\r\n  useEffect(() => {\r\n    const fetchBrands = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(apiUrl);\r\n        if (!res.ok) throw new Error('Network response was not ok');\r\n\r\n        const data = await res.json();\r\n        if (data.success && Array.isArray(data.brands)) {\r\n          setBrands(data.brands);\r\n          setError(null);\r\n        } else {\r\n          setBrands([]);\r\n          setError(data.message || 'No brands found for this category.');\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching brands:\", err);\r\n        setError(\"Failed to fetch brands. Please try again.\");\r\n        setBrands([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (categoryId) fetchBrands();\r\n  }, [categoryId, apiUrl]);\r\n\r\n  const handleKnowMore = (register_id) => {\r\n    navigate(`/brand/${register_id}`);\r\n  };\r\n\r\n  // Long-press logic\r\n  const holdTimeout = useRef(null);\r\n  const holdDuration = 1000; // ms to trigger hold (1s)\r\n\r\n  const handleHoldStart = (register_id) => {\r\n    holdTimeout.current = setTimeout(() => {\r\n      handleKnowMore(register_id);\r\n    }, holdDuration);\r\n  };\r\n\r\n  const handleHoldEnd = () => {\r\n    if (holdTimeout.current) {\r\n      clearTimeout(holdTimeout.current);\r\n      holdTimeout.current = null;\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"loading-message\">Loading brands...</div>;\r\n  if (error) return <div className=\"error-message\">{error}</div>;\r\n  if (brands.length === 0) return <div className=\"no-brands-message\">No franchises found in this category.</div>;\r\n\r\n  return (\r\n    <div className=\"franchise-listing-container\">\r\n      <div className=\"franchise-listing-main\">\r\n        <div className=\"franchise-listing-header\">\r\n          <h2 className=\"syb-heading\">All Franchises in Category</h2>\r\n        </div>\r\n\r\n        <div className=\"franchise-grid\">\r\n          {brands.map((brand, i) => (\r\n            <div\r\n              className=\"franchise-card\"\r\n              key={brand.id || i}\r\n              // Long press handlers\r\n              onMouseDown={() => handleHoldStart(brand.register_id)}\r\n              onMouseUp={handleHoldEnd}\r\n              onMouseLeave={handleHoldEnd}\r\n              onTouchStart={() => handleHoldStart(brand.register_id)}\r\n              onTouchEnd={handleHoldEnd}\r\n            >\r\n              <div className=\"franchise-img-wrap\">\r\n                <img\r\n                  src={getImageUrl(brand.logo) || 'https://via.placeholder.com/200'}\r\n                  alt={brand.name || 'Brand'}\r\n                />\r\n              </div>\r\n              <div className=\"franchise-content\">\r\n                <h3>{brand.name || 'Unknown Brand'}</h3>\r\n                <div className=\"franchise-detail\">\r\n                  <div className=\"biz-field\">\r\n                    <span className=\"label\">Sector:</span>\r\n                    <span className=\"value\">{brand.sector || '—'}</span>\r\n                  </div>\r\n                  <div className=\"biz-field\">\r\n                    <span className=\"label\">Investment:</span>\r\n                    <span className=\"value\">\r\n                      ₹{formatIndianCurrency(brand.min_investment)} - {formatIndianCurrency(brand.max_investment)}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"biz-field\">\r\n                    <span className=\"label\">Area:</span>\r\n                    <span className=\"value\">{brand.min_area || 0} - {brand.max_area || 0} sq.ft</span>\r\n                  </div>\r\n                  <div className=\"biz-field\">\r\n                    <span className=\"label\">Outlets:</span>\r\n                    <span className=\"value\">{brand.total_outlets || 0}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Click button for normal navigation */}\r\n                <button\r\n                  className=\"franchise-btn\"\r\n                  onClick={() => handleKnowMore(brand.register_id)}\r\n                >\r\n                  Know More (Hold)\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"franchise-listing-sidebar\">\r\n        <InquiryForm />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FranchiseListing;\r\n"],"names":["formatIndianCurrency","number","isNaN","concat","parseFloat","toFixed","toString","replace","FranchiseListing","categoryId","useParams","navigate","useNavigate","brands","setBrands","useState","loading","setLoading","error","setError","apiUrl","getApiUrl","useEffect","async","res","fetch","ok","Error","data","json","success","Array","isArray","message","err","console","fetchBrands","handleKnowMore","register_id","holdTimeout","useRef","handleHoldStart","current","setTimeout","handleHoldEnd","clearTimeout","_jsx","className","children","length","_jsxs","map","brand","i","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","src","getImageUrl","logo","alt","name","sector","min_investment","max_investment","min_area","max_area","total_outlets","onClick","id","InquiryForm"],"sourceRoot":""}